<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <record model="ir.ui.view" id="view_sale_order_form">
      <field name="name">sale.order.form.inherit</field>
      <field name="model">sale.order</field>
      <field name="inherit_id" ref="sale.view_order_form" />
      <field name="arch" type="xml">
        <page string='Other Information' position='before'>
          <page string ="Website Information" groups="base.group_user">
            <group>
              <field name='website_published' />
              <field name='website_subject' />
              <field name='website_description' />
            </group>
            <group col="6">
              <field name='date_start' />
              <field name='date_stop' />
            </group>
            <group col="6">
              <field name='qty' />
              <field name='categ_wtime_id' invisible='1' />
              <field name='uom_id' domain="[('category_id','=',categ_wtime_id)]" />
            </group>
            <group>
              <field name='language_ids' widget='many2many_tags' />
              <field name='location_ids' widget='many2many_tags' />
              <field name='skill_ids'>
                <tree string='Skills' editable='bottom'>
                  <field name='categ_id' />
                  <field name='level' />
                </tree>
              </field>
            </group>
          </page>
        </page>
      </field>
    </record>
    <template id="work_with_us">
      <t t-call="website.layout">
        <div class="container" id="info-board">
          <div class="text-field col-md-12 mt32" id="ingresstext">
            <p class="text-center">
              <h4>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat
                ulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
                deserunt mollit anim id est laborum.
              </h4>
            </p>
          </div>
          <div class="container">
            <h2>Dynamic Tabs</h2>
            <ul class="nav nav-tabs">
              <li class="active">
                <a data-toggle="tab" href="#home">Interest</a>
              </li>
              <li>
                <a data-toggle="tab" href="#menu1">Menu 1</a>
              </li>
              <li>
                <a data-toggle="tab" href="#menu2">Skapa konto</a>
              </li>
            </ul>
            <div class="tab-content">
              <div id="home" class="tab-pane fade in active">
                <h3>Lämna dina uppgifter så berättar vi mer.</h3>
                <form action="/crm/contactus" method="post" class="form-horizontal mt32" enctype="multipart/form-data">
                  <div class="col-md-12">
                    <div t-attf-class="form-group #{error and 'contact_name' in error and 'has-error' or ''}">
                      <label class="col-md-3 col-sm-4 control-label" for="contact_name">Your Name</label>
                      <div class="col-md-7 col-sm-8">
                        <input type="text" class="form-control" name="contact_name" required="True" t-attf-value="#{contact_name or ''}" />
                      </div>
                    </div>
                    <div t-attf-class="form-group #{error and 'phone' in error and 'has-error' or ''}">
                      <label class="col-md-3 col-sm-4 control-label" for="phone">Phone Number</label>
                      <div class="col-md-7 col-sm-8">
                        <input type="text" class="form-control" name="phone" t-attf-value="#{phone or ''}" />
                      </div>
                    </div>
                    <div name="email_from_container" t-attf-class="form-group #{error and 'email_from' in error and 'has-error' or ''}">
                      <label class="col-md-3 col-sm-4 control-label" for="email_from">Email</label>
                      <div class="col-md-7 col-sm-8">
                        <input type="email" class="form-control" name="email_from" required="True" t-attf-value="#{email_from or ''}" />
                      </div>
                    </div>
                    <div t-attf-class="form-group #{error and 'name' in error and 'has-error' or ''}">
                      <label class="col-md-3 col-sm-4 control-label" for="name">Subject</label>
                      <div class="col-md-7 col-sm-8">
                        <input type="text" class="form-control" name="name" t-attf-value="#{name or ''}" />
                      </div>
                    </div>
                    <div t-attf-class="form-group #{error and 'description' in error and 'has-error' or ''}">
                      <label class="col-md-3 col-sm-4 control-label" for="description">Your Question</label>
                      <div class="col-md-7 col-sm-8">
                        <textarea class="form-control" name="description" style="min-height: 120px" required="True">
                          <t t-esc="description or ''" />
                        </textarea>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7">
                        <button class="btn btn-primary btn-lg">Send</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              <!--
                   <form>
                   <div class="form-group">
                   <label for="exampleInputEmail1">Email address</label>
                   <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
                   </div>
                   <div class="form-group">
                   <label for="exampleInputPassword1">Password</label>
                   <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
                   </div>
                   <div class="form-group">
                   <label for="exampleInputFile">File input</label>
                   <input type="file" id="exampleInputFile">
                   <p class="help-block">Example block-level help text here.</p>
                   </div>
                   <div class="checkbox">
                   <label>
                   <input type="checkbox"> Check me out
                   </label>
                   </div>
                   <button type="submit" class="btn btn-default">Submit</button>
                   </form>
              -->
              <div id="menu1" class="tab-pane fade">
                <h3>Menu 1</h3>
                <div class="form-group">
                  <label for="exampleInputEmail1">Email address</label>
                  <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email" />
                </div>
              </div>
              <div id="menu2" class="tab-pane fade">
                <h3>Skapa konto</h3>
                <form class="oe_signup_form" role="form" method="post" action="/web/signup" t-if="not message">
                  <div class="col-md-8">
                    <t t-call="auth_signup.fields">
                      <t t-set="only_passwords" t-value="bool(token)" />
                    </t>
                    <p class="alert alert-danger" t-if="error">
                      <t t-esc="error" />
                    </p>
                    <input type="hidden" name="redirect" t-att-value="redirect" />
                    <input type="hidden" name="token" t-att-value="token" />
                    <div class="clearfix oe_login_buttons">
                      <a t-attf-href="/web/login?{{ keep_query() }}" class="btn btn-link pull-right">Back to Login</a>
                      <button type="submit" class="btn btn-primary pull-left">Sign up</button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="panel panel-login">
              <div class="panel-heading text-center penta-block">
                <div class="col-xs-4">
                  <button type="button" class="btn btn-primary" id="intressent-form-link">Intresseanmälan</button>
                </div>
                <div class="col-xs-4">
                  <button type="button" class="btn btn-primary" id="login-form-link">Logga in</button>
                </div>
                <div class="col-xs-4">
                  <button type="button" class="btn btn-primary" id="register-form-link">Skapa konto</button>
                </div>
              </div>
              <div class="panel-body">
                <form class="oe_register_form active" id="intressent-form" role="form" action="" method="post" onsubmit="">
                  <p class="mt16">Lämna dina uppgifter så berättar vi mer.</p>
                  <div class="col-xs-6">
                    <div class="form-group">
                      <input placeholder="Namn" type="text" name="name" id="name" class="form-control" required="required" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Epost" type="text" name="email" id="email" class="form-control" required="required" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Telefonnummer" type="text" name="phonenumber" id="phonenumber" class="form-control" required="required" />
                    </div>
                    <div class="clearfix oe_login_buttons">
                      <button type="submit" class="btn btn-primary">Skicka</button>
                    </div>
                  </div>
                  <div class="col-xs-4">
                    <textarea name="textarea" style="resize: none;" type="text" placeholder="Meddelande (valfritt)" rows="8" cols="26" />
                  </div>
                </form>
                <form class="oe_register_form" id="login-form" role="form" action="" method="post" onsubmit="" style="display:none">
                  <br />
                  <div class="col-xs-6">
                    <div class="form-group">
                      <input placeholder="Login" type="text" name="login" id="login" class="form-control" required="required" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Lösenord" type="password" name="password" id="password" class="form-control" required="required" />
                    </div>
                    <div class="clearfix oe_login_buttons">
                      <button type="submit" class="btn btn-primary">Skicka</button>
                    </div>
                  </div>
                </form>
                <form class="oe_register_form" id="register-form" role="form" action="" method="post" onsubmit="" style="display:none">
                  <br />
                  <div class="col-xs-6">
                    <div class="form-group">
                      <input placeholder="Namn" type="text" name="name" id="name" class="form-control" required="required" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Adress" type="text" name="adress" id="adress" class="form-control" required="required" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Adress" type="text" name="adress" id="adress" class="form-control" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Postnummer" type="text" name="adress" id="adress" class="form-control" required="required" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Stad" type="text" name="adress" id="adress" class="form-control" required="required" />
                    </div>
                  </div>
                  <div class="col-xs-6">
                    <div class="form-group">
                      <input placeholder="Telefonnummer (Hem)" type="text" name="name" id="name" class="form-control" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Telefonnummer (Mobil)" type="text" name="adress" id="adress" class="form-control" required="required" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Info 1" type="text" name="adress" id="adress" class="form-control" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Info 2" type="text" name="adress" id="adress" class="form-control" />
                    </div>
                    <div class="form-group">
                      <input placeholder="Info 3" type="text" name="adress" id="adress" class="form-control" />
                    </div>
                  </div>
                  <div class="col-xs-12">
                    <div class="col-xs-6">
                      <div class="clearfix oe_login_buttons">
                        <div class="col-xs-8">
                          <button type="submit" class="btn btn-primary">Skapa</button>
                        </div>
                        <div class="col-xs-4">
                          <button type="submit" class="btn btn-primary">Bifoga CV</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </t>
      <script>
        function testLoginForm() {
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var phone = document.getElementById("phonenumber").value;
        var texten = "name: " + name + "\nemail: " + email + "\nphone: " + phone;
        alert(texten);
        }
        
        $(document).ready(function() {
        $('#intressent-form-link').click(function(e) {
        $("#intressent-form").delay(100).fadeIn(100);
        $("#login-form").fadeOut(100);
        $('#login-form-link').removeClass('active');
        $("#register-form").fadeOut(100);
        $('#register-form-link').removeClass('active');
        $(this).addClass('active');
        e.preventDefault();
        });
        $('#login-form-link').click(function(e) {
        $("#login-form").delay(100).fadeIn(100);
        $("#intressent-form").fadeOut(100);
        $('#intressent-form-link').removeClass('active');
        $("#register-form").fadeOut(100);
        $('#register-form-link').removeClass('active');
        $(this).addClass('active');
        e.preventDefault();
        });
        $('#register-form-link').click(function(e) {
        $("#register-form").delay(100).fadeIn(100);
        $("#intressent-form").fadeOut(100);
        $('#intressent-form-link').removeClass('active');
        $("#login-form").fadeOut(100);
        $('#login-form-link').removeClass('active');
        $(this).addClass('active');
        e.preventDefault();
        });
        
        });
      </script>
    </template>
    <!-- SENASTE UPPDRAGEN -->
    <template id="senaste_uppdragen">
      <t t-call="website.layout">
        <div class="container" id="info-board">
          <div class="row mt16">
            <div class="col-md-4">
              <div class="panel-group" id="accordion">
                <div class="panel-heading text-center penta-block">
                  <h4 style="margin: 0">
                    <span>Senaste uppdragen</span>
                  </h4>
                </div>
                <div class="panel panel-default">
                  <t t-foreach="request.env['sale.order'].sudo().search([('website_published','=',True)],limit=4).sorted(key=lambda r: r.partner_id.name)" t-as="active_order">
                    <div class="panel-heading">
                      <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" t-att-href="'#%s' %active_order.name" t-field="active_order.website_subject" />
                      </h4>
                    </div>
                    <div t-att-id="'%s'%active_order.name" class="panel-collapse collapse">
                      <div class="panel-body" style="background: #FFFFFF;">
                        <t t-if="active_order.date_start and active_order.date_stop">
                          <div class="row">
                            <span>
                              <div class="col-sm-4">
                                Start
                                <p t-esc='active_order.date_start' />
                              </div>
                              <div class="col-sm-4">
                                Stop
                                <p t-esc='active_order.date_stop' />
                              </div>
                            </span>
                          </div>
                        </t>
                        <t t-if="active_order.qty and active_order.uom_id.name">
                          <div class='row'>
                            <div class="col-sm-8">
                              <p style='padding:2px' t-esc="'Omfattning: %.2f %s' %(active_order.qty, active_order.uom_id.name)" />
                            </div>
                          </div>
                        </t>
                        <t t-if="active_order.location_ids">
                          <div class="row">
                            <div class="col-sm-2">Plats:</div>
                            <t t-foreach='active_order.location_ids' t-as='loc'>
                              <p style='padding: 2px' class='label label-default' t-esc='loc.name' />
                            </t>
                          </div>
                        </t>
                        <t t-if="active_order.language_ids">
                          <div class="row">
                            <div class="col-sm-2">Språk:</div>
                            <t t-foreach='active_order.language_ids' t-as='l'>
                              <p style='padding: 2px' class='label label-default' t-esc='l.name' />
                            </t>
                          </div>
                        </t>
                        <t t-if="active_order.skill_ids">
                          <div class="row">
                            <div class="col-sm-2">Skills:</div>
                            <div class="col-sm-6">
                              <t t-set='skill_desc' t-value='active_order.skill_ids._fields["level"].get_description(active_order.env)["selection"]' />
                              <t t-foreach="active_order.skill_ids" t-as='s'>
                                <t t-set='level' t-value='[l[1] for l in skill_desc if l[0] == s.level][0]' />
                                <p style='padding:2px' class="label label-default" t-esc="'%s (%s)' % (s.categ_id.name, level)" />
                              </t>
                            </div>
                          </div>
                        </t>
                        <p t-field="active_order.website_description" />
                        <div class="clearfix oe_login_buttons">
<!--
                          <t t-set="user" t-value="request.env['res.partner'].sudo().search([('active','=',True)])[0]" />
                          <p t-esc="user" />
-->
                          
                          <button class='btn btn-primary' groups='base.group_user' t-att-onclick="'interestedButton(%s,%s)' %(active_order.id, active_order.name)">Intresseanmälan</button>
                        </div>
                        <div class="clearfix oe_login_buttons">
                          <a t-att-href="'login/redirect=%s'%active_order.name">
                            <button type="submit" class="btn btn-primary" groups="base.group_public">Logga in</button>
                          </a>
                        </div>
                      </div>
                    </div>
                  </t>
                </div>
              </div>
            </div>
          </div>
        </div>
      </t>
      <script>function interestedButton(id, name){
        //name.id är sale ordern vi ska göra intresseanmälan på.
        var website = openerp.website;
        //name_search', ['',[]], { context: website.get_context()}
        //website.jsonRpc
        website.session.model('sale.order').call('send_mail',[name.id, id],{}).then(alert("Notification sent to " + name.id));
        }</script>
    </template>
  </data>
</openerp>
